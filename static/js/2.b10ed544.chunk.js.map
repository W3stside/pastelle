{"version":3,"sources":["../node_modules/@use-gesture/core/dist/actions-8fb255d4.esm.js","../node_modules/@use-gesture/core/dist/maths-b2a210f4.esm.js","../node_modules/@use-gesture/react/dist/use-gesture-react.esm.js","../node_modules/@use-gesture/core/actions/dist/use-gesture-core-actions.esm.js","../node_modules/@use-gesture/core/dist/use-gesture-core.esm.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","toHandlerProp","device","action","capture","deviceProps","actionKey","pointerCaptureEvents","parseProp","prop","eventKey","substring","toLowerCase","passive","indexOf","replace","captureKey","includes","toDomEventType","isTouch","event","getValueEvent","type","changedTouches","targetTouches","getTouchList","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","touchIds","Array","from","touches","e","_event$currentTarget","_event$currentTarget$","currentTarget","contains","call","getCurrentTargetTouchList","map","identifier","touchDistanceAngle","ids","pointerId","valueEvent","pointerValues","wheelValues","deltaX","deltaY","deltaMode","v","args","noop","chain","fns","result","fn","this","assignDefault","fallback","assign","Engine","ctrl","state","computeValues","computeInitial","init","reset","shared","gestureEventStores","gestureTimeoutStores","config","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_direction","_delta","_bounds","Infinity","axis","undefined","memo","elapsedTime","direction","overflow","_movementBound","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","getEventDetails","down","pressed","_absoluteDelta","abs","V","addTo","_m0","_m1","threshold","t0","t1","hasCustomTransform","sign","v0","v1","intent","previousOffset","gestureIsActive","first","last","bounds","setup","computeOffset","ox","oy","x0","x1","y0","y1","rubberband","computeRubberband","sub","computeMovement","absoluteDelta","clean","triggerAllEvents","handler","aliasKey","eventStore","timeoutStore","CoordinatesEngine","add","d","selectAxis","lockDirection","restrictVectorToAxis","identity","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","toVector","_k","coordinatesConfigResolver","_v","current","HTMLElement","left","right","top","bottom","DISPLACEMENT","KEYS_DELTA_MAP","ArrowRight","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","compute","emit","pointerClean","isArray","pointerButtons","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScrollAxis","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","id","movementX","movementY","remove","hasPointerCapture","releasePointerCapture","_unused","process","setActive","tapsThreshold","filterTaps","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","duration","stopPropagation","pointerLock","requestPointerLock","sharedConfig","window","pointerMove","pointerUp","exitPointerLock","persist","persistEvent","preventScroll","preventScrollDelay","deltaFn","bindFunction","pointerDown","keyDown","keyUp","pointerClick","isBrowser","createElement","isTouchScreen","navigator","maxTouchPoints","SUPPORT","GestureEvent","supportsGestureEvents","touchscreen","dragConfigResolver","lock","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","ctrlTouchIds","every","has","pinchStart","ctrlPointerIds","set","pinchMove","prev_a","delta_a","delta_turns","some","delete","scale","rotation","_previousMovement","wheelChange","wheelStart","wheelEnd","wheel","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","mouseOnly","pointerType","moveChange","moveStart","moveEnd","move","moveConfigResolver","ScrollEngine","scrollChange","scrollEnd","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","scrollValues","scroll","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","clamp","v2","subTo","dimension","constant","pow","rubberbandIfOutOfBounds","position","Vx","Vy","Rx","Ry","X0","X1","Y0","Y1","useRecognizers","gestureKey","nativeHandlers","React","useMemo","Controller","applyHandlers","applyConfig","useEffect","effect","createUseGesture","actions","_handlers","_config","parseMergedHandlers","useGesture","hook","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","sharedConfigResolver","eventOptions","_excluded","resolveWith","resolvers","entries","EventStore","_ctrl","element","options","addEventListener","_listeners","removeEventListener","TimeoutStore","callback","ms","_timeouts","timeout","get","clearTimeout","clear","Set","internalHandlers","drag","setupGesture","pinch","hover","resolveGestures","rest","parse","_targetEventStore","gestures","props","bindToProps","handlerProp","withPassiveOption","_options$capture","_options$passive","isNative","RE_NOT_NATIVE","registerGesture","handlerKey","startKey","endKey","mergedHandlers","mergedConfig","native","test","RegExp","lastMatch","sortHandlers"],"mappings":"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","file":"static/js/2.b10ed544.chunk.js","sourcesContent":["import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (capture ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n\n    if (this.intent) this.intent(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n      }\n    }\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis([dx, dy]) {\n  const d = Math.abs(dx) - Math.abs(dy);\n  if (d > 0) return 'x';\n  if (d < 0) return 'y';\n  return undefined;\n}\n\nfunction restrictVectorToAxis(v, axis) {\n  switch (axis) {\n    case 'x':\n      v[1] = 0;\n      break;\n\n    case 'y':\n      v[0] = 0;\n      break;\n  }\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  intent(v) {\n    this.state.axis = this.state.axis || selectAxis(v);\n    this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis;\n    if (this.state._blocked) return;\n\n    if (this.config.axis || this.config.lockDirection) {\n      restrictVectorToAxis(v, this.state.axis);\n    }\n  }\n\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n\n  preventDefault(value = false) {\n    return value;\n  },\n\n  triggerAllEvents(value = false) {\n    return value;\n  },\n\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n\n      return NaN;\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n\n      return NaN;\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst DISPLACEMENT = 10;\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n\n    if (config.preventScrollAxis) {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n\n    const _values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    persistEvent(event);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', this.clean.bind(this));\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', this.clean.bind(this));\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      state._delta = deltaFn(factor);\n      this.start(event);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n\n    bindFunction('key', 'down', this.keyDown.bind(this));\n    bindFunction('key', 'up', this.keyUp.bind(this));\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  intent(v) {\n    const state = this.state;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(v[0]) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(v[1]);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n\n    if (this.config.lockDirection) {\n      if (state.axis === 'scale') v[1] = 0;else if (state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    if (!event.ctrlKey) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    } else {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    const [ox, oy] = state.overflow;\n    const [dx, dy] = state._delta;\n    const [dirx, diry] = state._direction;\n\n    if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n      state._movement[0] = state._movementBound[0];\n    }\n\n    if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n      state._movement[1] = state._movementBound[1];\n    }\n\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n","function clamp(v, min, max) {\n  return Math.max(min, Math.min(v, max));\n}\nconst V = {\n  toVector(v, fallback) {\n    if (v === undefined) v = fallback;\n    return Array.isArray(v) ? v : [v, v];\n  },\n\n  add(v1, v2) {\n    return [v1[0] + v2[0], v1[1] + v2[1]];\n  },\n\n  sub(v1, v2) {\n    return [v1[0] - v2[0], v1[1] - v2[1]];\n  },\n\n  addTo(v1, v2) {\n    v1[0] += v2[0];\n    v1[1] += v2[1];\n  },\n\n  subTo(v1, v2) {\n    v1[0] -= v2[0];\n    v1[1] -= v2[1];\n  }\n\n};\n\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return Math.pow(distance, constant * 5);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\n\nfunction rubberbandIfOutOfBounds(position, min, max, constant = 0.15) {\n  if (constant === 0) return clamp(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\nfunction computeRubberband(bounds, [Vx, Vy], [Rx, Ry]) {\n  const [[X0, X1], [Y0, Y1]] = bounds;\n  return [rubberbandIfOutOfBounds(Vx, X0, X1, Rx), rubberbandIfOutOfBounds(Vy, Y0, Y1, Ry)];\n}\n\nexport { V, computeRubberband as c, rubberbandIfOutOfBounds as r };\n","import { registerAction, dragAction, pinchAction, wheelAction, scrollAction, moveAction, hoverAction } from '@use-gesture/core/actions';\nexport * from '@use-gesture/core/actions';\nimport React from 'react';\nimport { Controller, parseMergedHandlers } from '@use-gesture/core';\nexport * from '@use-gesture/core/utils';\nexport * from '@use-gesture/core/types';\n\nfunction useRecognizers(handlers, config = {}, gestureKey, nativeHandlers) {\n  const ctrl = React.useMemo(() => new Controller(handlers), []);\n  ctrl.applyHandlers(handlers, nativeHandlers);\n  ctrl.applyConfig(config, gestureKey);\n  React.useEffect(ctrl.effect.bind(ctrl));\n  React.useEffect(() => {\n    return ctrl.clean.bind(ctrl);\n  }, []);\n\n  if (config.target === undefined) {\n    return ctrl.bind.bind(ctrl);\n  }\n\n  return undefined;\n}\n\nfunction useDrag(handler, config = {}) {\n  registerAction(dragAction);\n  return useRecognizers({\n    drag: handler\n  }, config, 'drag');\n}\n\nfunction usePinch(handler, config = {}) {\n  registerAction(pinchAction);\n  return useRecognizers({\n    pinch: handler\n  }, config, 'pinch');\n}\n\nfunction useWheel(handler, config = {}) {\n  registerAction(wheelAction);\n  return useRecognizers({\n    wheel: handler\n  }, config, 'wheel');\n}\n\nfunction useScroll(handler, config = {}) {\n  registerAction(scrollAction);\n  return useRecognizers({\n    scroll: handler\n  }, config, 'scroll');\n}\n\nfunction useMove(handler, config = {}) {\n  registerAction(moveAction);\n  return useRecognizers({\n    move: handler\n  }, config, 'move');\n}\n\nfunction useHover(handler, config = {}) {\n  registerAction(hoverAction);\n  return useRecognizers({\n    hover: handler\n  }, config, 'hover');\n}\n\nfunction createUseGesture(actions) {\n  actions.forEach(registerAction);\n  return function useGesture(_handlers, _config = {}) {\n    const {\n      handlers,\n      nativeHandlers,\n      config\n    } = parseMergedHandlers(_handlers, _config);\n    return useRecognizers(handlers, config, undefined, nativeHandlers);\n  };\n}\n\nfunction useGesture(handlers, config = {}) {\n  const hook = createUseGesture([dragAction, pinchAction, scrollAction, wheelAction, moveAction, hoverAction]);\n  return hook(handlers, config);\n}\n\nexport { createUseGesture, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };\n","export { C as ConfigResolverMap, E as EngineMap, e as dragAction, h as hoverAction, m as moveAction, f as pinchAction, r as registerAction, s as scrollAction, w as wheelAction } from '../../dist/actions-8fb255d4.esm.js';\nimport '../../dist/maths-b2a210f4.esm.js';\n","import { S as SUPPORT, C as ConfigResolverMap, _ as _objectSpread2, a as _defineProperty, t as toDomEventType, i as isTouch, b as touchIds, E as EngineMap, c as chain, p as parseProp, d as toHandlerProp } from './actions-8fb255d4.esm.js';\nimport './maths-b2a210f4.esm.js';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nconst sharedConfigResolver = {\n  target(value) {\n    if (value) {\n      return () => 'current' in value ? value.current : value;\n    }\n\n    return undefined;\n  },\n\n  enabled(value = true) {\n    return value;\n  },\n\n  window(value = SUPPORT.isBrowser ? window : undefined) {\n    return value;\n  },\n\n  eventOptions({\n    passive = true,\n    capture = false\n  } = {}) {\n    return {\n      passive,\n      capture\n    };\n  },\n\n  transform(value) {\n    return value;\n  }\n\n};\n\nconst _excluded = [\"target\", \"eventOptions\", \"window\", \"enabled\", \"transform\"];\nfunction resolveWith(config = {}, resolvers) {\n  const result = {};\n\n  for (const [key, resolver] of Object.entries(resolvers)) {\n    switch (typeof resolver) {\n      case 'function':\n        if (process.env.NODE_ENV === 'development') {\n          const r = resolver.call(result, config[key], key, config);\n          if (!Number.isNaN(r)) result[key] = r;\n        } else {\n          result[key] = resolver.call(result, config[key], key, config);\n        }\n\n        break;\n\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n\n  return result;\n}\nfunction parse(config, gestureKey) {\n  const _ref = config,\n        {\n    target,\n    eventOptions,\n    window,\n    enabled,\n    transform\n  } = _ref,\n        rest = _objectWithoutProperties(_ref, _excluded);\n\n  const _config = {\n    shared: resolveWith({\n      target,\n      eventOptions,\n      window,\n      enabled,\n      transform\n    }, sharedConfigResolver)\n  };\n\n  if (gestureKey) {\n    const resolver = ConfigResolverMap.get(gestureKey);\n    _config[gestureKey] = resolveWith(_objectSpread2({\n      shared: _config.shared\n    }, rest), resolver);\n  } else {\n    for (const key in rest) {\n      const resolver = ConfigResolverMap.get(key);\n\n      if (resolver) {\n        _config[key] = resolveWith(_objectSpread2({\n          shared: _config.shared\n        }, rest[key]), resolver);\n      } else if (process.env.NODE_ENV === 'development') {\n        if (!['drag', 'pinch', 'scroll', 'wheel', 'move', 'hover'].includes(key)) {\n          if (key === 'domTarget') {\n            throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n          }\n\n          console.warn(`[@use-gesture]: Unknown config key \\`${key}\\` was used. Please read the documentation for further information.`);\n        }\n      }\n    }\n  }\n\n  return _config;\n}\n\nclass EventStore {\n  constructor(ctrl) {\n    _defineProperty(this, \"_listeners\", []);\n\n    this._ctrl = ctrl;\n  }\n\n  add(element, device, action, handler, options) {\n    const type = toDomEventType(device, action);\n\n    const eventOptions = _objectSpread2(_objectSpread2({}, this._ctrl.config.shared.eventOptions), options);\n\n    element.addEventListener(type, handler, eventOptions);\n\n    this._listeners.push(() => element.removeEventListener(type, handler, eventOptions));\n  }\n\n  clean() {\n    this._listeners.forEach(remove => remove());\n\n    this._listeners = [];\n  }\n\n}\n\nclass TimeoutStore {\n  constructor() {\n    _defineProperty(this, \"_timeouts\", new Map());\n  }\n\n  add(key, callback, ms = 140, ...args) {\n    this.remove(key);\n\n    this._timeouts.set(key, window.setTimeout(callback, ms, ...args));\n  }\n\n  remove(key) {\n    const timeout = this._timeouts.get(key);\n\n    if (timeout) window.clearTimeout(timeout);\n  }\n\n  clean() {\n    this._timeouts.forEach(timeout => void window.clearTimeout(timeout));\n\n    this._timeouts.clear();\n  }\n\n}\n\nclass Controller {\n  constructor(handlers) {\n    _defineProperty(this, \"gestures\", new Set());\n\n    _defineProperty(this, \"_targetEventStore\", new EventStore(this));\n\n    _defineProperty(this, \"gestureEventStores\", {});\n\n    _defineProperty(this, \"gestureTimeoutStores\", {});\n\n    _defineProperty(this, \"handlers\", {});\n\n    _defineProperty(this, \"config\", {});\n\n    _defineProperty(this, \"pointerIds\", new Set());\n\n    _defineProperty(this, \"touchIds\", new Set());\n\n    _defineProperty(this, \"state\", {\n      shared: {\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }\n    });\n\n    resolveGestures(this, handlers);\n  }\n\n  setEventIds(event) {\n    if (isTouch(event)) {\n      this.touchIds = new Set(touchIds(event));\n    } else if ('pointerId' in event) {\n      if (event.type === 'pointerup' || event.type === 'pointercancel') this.pointerIds.delete(event.pointerId);else if (event.type === 'pointerdown') this.pointerIds.add(event.pointerId);\n    }\n  }\n\n  applyHandlers(handlers, nativeHandlers) {\n    this.handlers = handlers;\n    this.nativeHandlers = nativeHandlers;\n  }\n\n  applyConfig(config, gestureKey) {\n    this.config = parse(config, gestureKey);\n  }\n\n  clean() {\n    this._targetEventStore.clean();\n\n    for (const key of this.gestures) {\n      this.gestureEventStores[key].clean();\n      this.gestureTimeoutStores[key].clean();\n    }\n  }\n\n  effect() {\n    if (this.config.shared.target) this.bind();\n    return () => this._targetEventStore.clean();\n  }\n\n  bind(...args) {\n    const sharedConfig = this.config.shared;\n    const eventOptions = sharedConfig.eventOptions;\n    const props = {};\n    let target;\n\n    if (sharedConfig.target) {\n      target = sharedConfig.target();\n      if (!target) return;\n    }\n\n    const bindFunction = bindToProps(props, eventOptions, !!target);\n\n    if (sharedConfig.enabled) {\n      for (const gestureKey of this.gestures) {\n        if (this.config[gestureKey].enabled) {\n          const Engine = EngineMap.get(gestureKey);\n          new Engine(this, args, gestureKey).bind(bindFunction);\n        }\n      }\n\n      for (const eventKey in this.nativeHandlers) {\n        bindFunction(eventKey, '', event => this.nativeHandlers[eventKey](_objectSpread2(_objectSpread2({}, this.state.shared), {}, {\n          event,\n          args\n        })), undefined, true);\n      }\n    }\n\n    for (const handlerProp in props) {\n      props[handlerProp] = chain(...props[handlerProp]);\n    }\n\n    if (!target) return props;\n\n    for (const handlerProp in props) {\n      const {\n        device,\n        capture,\n        passive\n      } = parseProp(handlerProp);\n\n      this._targetEventStore.add(target, device, '', props[handlerProp], {\n        capture,\n        passive\n      });\n    }\n  }\n\n}\n\nfunction setupGesture(ctrl, gestureKey) {\n  ctrl.gestures.add(gestureKey);\n  ctrl.gestureEventStores[gestureKey] = new EventStore(ctrl);\n  ctrl.gestureTimeoutStores[gestureKey] = new TimeoutStore();\n}\n\nfunction resolveGestures(ctrl, internalHandlers) {\n  if (internalHandlers.drag) setupGesture(ctrl, 'drag');\n  if (internalHandlers.wheel) setupGesture(ctrl, 'wheel');\n  if (internalHandlers.scroll) setupGesture(ctrl, 'scroll');\n  if (internalHandlers.move) setupGesture(ctrl, 'move');\n  if (internalHandlers.pinch) setupGesture(ctrl, 'pinch');\n  if (internalHandlers.hover) setupGesture(ctrl, 'hover');\n}\n\nconst bindToProps = (props, eventOptions, withPassiveOption) => (device, action, handler, options = {}, isNative = false) => {\n  var _options$capture, _options$passive;\n\n  const capture = (_options$capture = options.capture) !== null && _options$capture !== void 0 ? _options$capture : eventOptions.capture;\n  const passive = (_options$passive = options.passive) !== null && _options$passive !== void 0 ? _options$passive : eventOptions.passive;\n  let handlerProp = isNative ? device : toHandlerProp(device, action, capture);\n  if (withPassiveOption && passive) handlerProp += 'Passive';\n  props[handlerProp] = props[handlerProp] || [];\n  props[handlerProp].push(handler);\n};\n\nconst RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\n\nfunction sortHandlers(_handlers) {\n  const native = {};\n  const handlers = {};\n  const actions = new Set();\n\n  for (let key in _handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handlers[key] = _handlers[key];\n    } else {\n      native[key] = _handlers[key];\n    }\n  }\n\n  return [handlers, native, actions];\n}\n\nfunction registerGesture(actions, handlers, handlerKey, key, internalHandlers, config) {\n  if (!actions.has(handlerKey)) return;\n\n  if (!EngineMap.has(key)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`[@use-gesture]: You've created a custom handler that that uses the \\`${key}\\` gesture but isn't properly configured.\\n\\nPlease add \\`${key}Action\\` when creating your handler.`);\n    }\n\n    return;\n  }\n\n  const startKey = handlerKey + 'Start';\n  const endKey = handlerKey + 'End';\n\n  const fn = state => {\n    let memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n\n  internalHandlers[key] = fn;\n  config[key] = config[key] || {};\n}\n\nfunction parseMergedHandlers(mergedHandlers, mergedConfig) {\n  const [handlers, nativeHandlers, actions] = sortHandlers(mergedHandlers);\n  const internalHandlers = {};\n  registerGesture(actions, handlers, 'onDrag', 'drag', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onWheel', 'wheel', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onScroll', 'scroll', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onPinch', 'pinch', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onMove', 'move', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onHover', 'hover', internalHandlers, mergedConfig);\n  return {\n    handlers: internalHandlers,\n    config: mergedConfig,\n    nativeHandlers\n  };\n}\n\nexport { Controller, parseMergedHandlers };\n"],"sourceRoot":""}